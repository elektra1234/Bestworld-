<!DOCTYPE html>
<html>
<head>
  <title>Sol Firestore Test</title>
</head>
<body>
  <h1>Listening for tasks in Firestore...</h1>
  <p>Open the console to see if Sol hears anything.</p>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAnoaqzl8OxmKsGk3Uj6rtxKJINVcZb8tM",
      authDomain: "bestworldhelper.firebaseapp.com",
      projectId: "bestworldhelper",
      storageBucket: "bestworldhelper.appspot.com",
      messagingSenderId: "172061883318",
      appId: "1:172061883318:web:cfe12dffbf92f7ce4e9f17",
      measurementId: "G-TM2Z25G02V"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    console.log("âœ… Firebase initialized.");
    
    const tasksRef = collection(db, "helperTasks");

    onSnapshot(tasksRef, (snapshot) => {
      snapshot.docChanges().forEach((change) => {
        if (change.type === "added") {
          const task = change.doc.data();
          console.log("ðŸ“¥ New task received:", task);
        }
      });
    });
  </script>
</body>
</html>
